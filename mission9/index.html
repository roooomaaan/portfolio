<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="style.css" />
    <title>QCM</title>
  </head>

  <body>
    <h1>QCM</h1>

    <script>
      const answers = {
        q1: "r3",
        q2: "r2",
      }

      function validate() {
        let score = 0
        let result = document.getElementById("result")
        result.innerHTML = ""

        for (let question in answers) {
          let selected = document.querySelector(
            `input[name="${question}"]:checked`
          )

          if (!selected) {
            alert("Veuillez sélectionnez des réponses")
            return
          }

          if (selected.value === answers[question]) {
            score++
          }

          let total = Object.keys(answers).length
          result.innerHTML = `Score: ${score} / ${total}`
        }
      }

      function erase() {
        document.querySelectorAll('input[type="radio"]').forEach((radio) => {
          radio.checked = false
        })
      }

      function correct() {
        for (let question in answers) {
          let correctAnswer = answers[question]
          let correctRadio = document.querySelector(
            `input[name="${question}"][value="${correctAnswer}"]`
          )

          let classes = correctRadio.parentElement.classList
          if (classes.contains("correct")) {
            correctRadio.parentElement.classList.remove("correct")
          } else {
            correctRadio.parentElement.classList.add("correct")
          }
        }
      }
    </script>

    <div class="questions">
      <section class="question">
        <h3>Question 1</h3>
        <p>Qui est le créateur de Linux ?</p>

        <div class="reponse">
          <input type="radio" name="q1" id="q11" value="r1" />
          <label for="q11">Jeff Bezos</label>
        </div>
        <div class="reponse">
          <input type="radio" name="q1" id="q12" value="r2" />
          <label for="q12">Elon Musk</label>
        </div>
        <div class="reponse">
          <input type="radio" name="q1" id="q13" value="r3" />
          <label for="q13">Linus Torvalds</label>
        </div>
        <div class="reponse">
          <input type="radio" name="q1" id="q14" value="r4" />
          <label for="q14">Bill Gates</label>
        </div>
      </section>

      <section class="question">
        <h3>Question 2</h3>
        <p>Quel balise utiliser pour faire un lien hypertexte ?</p>

        <div class="reponse">
          <input type="radio" name="q2" id="q21" value="r1" />
          <label for="q21">link</label>
        </div>
        <div class="reponse">
          <input type="radio" name="q2" id="q22" value="r2" />
          <label for="q22">a</label>
        </div>
        <div class="reponse">
          <input type="radio" name="q2" id="q23" value="r3" />
          <label for="q23">hypertext</label>
        </div>
        <div class="reponse">
          <input type="radio" name="q2" id="q24" value="r4" />
          <label for="q24">goto</label>
        </div>
      </section>

      <div id="result"></div>

      <button type="submit" onclick="validate()">Envoyer</button>
      <button type="submit" onclick="erase()">Effacer</button>
      <button type="submit" onclick="correct()">Corrigé</button>
    </div>

    <a href="../index.html">Retour</a>
  </body>
</html>
